---
title: "めんどくさがりのためのリークチェック"
emoji: "😸"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["42", "42Tokyo", "githubactions", "valgrind", "test"]
published: false
---

こんにちは，[42tokyo Advent Calendar 2021](https://qiita.com/advent-calendar/2021/42tokyo) の 4 日目を担当する、在校生の [tayamamo](https://profile.intra.42.fr/users/tayamamo) です．
日々 42 的学びの中で自己研鑽に励んでおります．

# 要旨
ローカルで行なっていた [Google sanitizers](https://github.com/google/sanitizers) と [Valgrind](https://valgrind.org/) を用いたリークチェックを，Github Actions と Docker を用いて，GitHub 上でも行えるようにした．このことにより，ローカルでもオンラインでもリークチェックが 2 重に行えるようになり，課題提出時のミスが軽減されるであろうという安心感が向上した．

# 序論
42Tokyo では，日々ピアラーニングと課題解決型学習を通して学習に励んでいます．
何かを教えてくれる教師やメンターがおりませんので，自分たちで評価項目に沿って，相手の課題を評価します．その際に，自分が今まで得た知見を生かし，相手のコードのミステイクを見つけたり，コードがより良くなるためのアドバイスをしたり，されたり，課題で問われている内容をきちんと理解し，自分で実装できているかを確認したりします．ここで，実装者が**意図していない挙動**，**ランタイムエラー**，**リーク**，**セグフォ**は絶対に許容されません．これが曲者で，知見が溜まってくるとどんどんコードを見る目が高度になり，課題をサクセスさせることが難しくなります．知識が浅いままで実装をしていると，直ぐにエラーが見つかります＞＜

42 では，[Build your own X](https://github.com/danistefanovic/build-your-own-x) の精神で，車輪の再発明をどんどん行なっているので，自分でリークチェッカーなどを実装したら良いのですが，今回は巨人の肩にたくさん乗らせてもらいリークチェックを行いました．

# 課題
ローカルでは Makefile と Docker を用いて，Sanitizer と Valgrind によるリークチェックが行えていたが，リークチェックを行おうとするたびに `make leak`, `make valgrind` などのコマンドを手打ちしており，めんどかった．（自動化できる所はどんどん自動化していこうの精神）

# 手法
## ローカルでのリークチェック
### Sanitizer

### Valgrind

## オンラインでのリークチェック

# 結果

# 考察
オンラインでもリークチェックができるようになり，大満足だが，評価環境とリークチェック環境とに若干の差異があるのが課題である．

この感じでいろんなことを自動化していきたい．

# 謝辞
42Tokyo に関わる皆さんには本当に助けてもらったり，お世話になっていたりします．本当にありがとうございます！
